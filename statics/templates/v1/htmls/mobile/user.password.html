
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, maximum-scale=1.0"/>
    <title>{wc:$title} - {wc:$webname}触屏版</title>
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link href="{G_TEMPLATES_CSS}/mobile/newComm.css?v=130715" rel="stylesheet" type="text/css" />
    
	<link href="{G_TEMPLATES_CSS}/mobile/login.css" rel="stylesheet" type="text/css" />
    

           <script type="text/javascript" src="{G_TEMPLATES_STYLE}/js/js.min.js"></script>

	<script src="{G_TEMPLATES_JS}/mobile/jquery190.js" language="javascript" type="text/javascript"></script>
</head>
<body>
<div class="h5-1yyg-v11">
    
<!-- 栏目页面顶部 -->


<!-- 内页顶部 -->

    <header class="g-header">
        <div class="head-l">
	        <a href="javascript:;" onclick="history.go(-1)" class="z-HReturn"><s></s><b>返回</b></a>
        </div>
        <h2>密码修改</h2>
        <div class="head-r">
	        <a href="{WEB_PATH}/mobile/mobile/?yid={wc:$uids}" class="z-Home"></a>
        </div>
    </header>
    <div class="container-fluid">
      <div class="a_account_top">
        <a href="{WEB_PATH}/mobile/mobile/userindex/{wc:$member['uid']}/{wc:$uids}/" class="a_set_img"></a>
        <a href="{WEB_PATH}/mobile/mobile/userindex/{wc:$member['uid']}/{wc:$uids}/"><img class="a_user_img" id="headPic" src="{G_UPLOAD_PATH}/{wc:fun:get_user_key($member['uid'],'img')}"></a>
        <p class="a_account_p1"><span id="userId">账号:{wc:fun:get_user_name($member['uid'])}</span><em id="nickname">昵称:{wc:$member['username']}</em></p>
        <p class="a_account_p2">可用微积分：<span class="a_orange" id="score">{wc:$member['score']}</span>    <em>|</em>  可用余额：<span class="a_orange" id="moneyTotal">￥{wc:$member['money']}</span></p>
         <p class="a_account_p2">经验值：<span class="a_orange" id="brokerageUsable">{wc:$member['jingyan']}</span> <!--   <em>|</em> 会员等级：<span class="a_orange" id="cardUsable"></span> --></p>
        <a href="{WEB_PATH}/mobile/home/userrecharge/{wc:$uids}/" class="a_now_recharge">立即充值</a>
      </div>
      
     
	          <section>
		<form id="wfform" name="wfform" onSubmit="return postcheck()" action="{WEB_PATH}/mobile/home/userpassword" method="post">
        <input type="hidden" name="type_pro" value="/mobile/home">
	        <div class="registerCon">
    	        <ul class="form">
					        	        <li>
						<input name="password" id="password" type="password" placeholder="请输入原密码" value="" style="padding-left: 60px;">
						<span style="border: none;height: 34px;width: 60px;background-position: 0 -25px;position: absolute;top: 12px;left: 5px;">原密码：</span>
                    </li>
        	        <li>
						<input name="userpassword" id="password1" type="password" placeholder="请输入新密码" value="" style="padding-left: 60px;">
 						<span style="border: none;height: 34px;width: 60px;background-position: 0 -25px;position: absolute;top: 12px;left: 5px;">新密码：</span>
                    </li>
        	        <li>
						<input name="userpassword2" id="password2" type="password" placeholder="请重复输入新密码" value="" style="padding-left: 60px;">
 						<span style="border: none;height: 34px;width: 60px;background-position: 0 -25px;position: absolute;top: 12px;left: 5px;">新密码：</span>
                    </li>
                    <li>
                      
					<input id="btn_login" type="button"  style="background:#f60;border:1px solid #C40000;color:#FFFFFF;" class="bluebut" value="确定修改" >
					</li>
                </ul>
	        </div>
			</form>
        </section>




    </div>
<style>
.wap-tips{ width: 130px; height: 50px; border-radius: 10px; -webkit-border-radius: 10px; text-align: center; line-height: 50px; background: #000; color: #fff; position: absolute; top: 50%; left: 50%; font-family: "微软雅黑"; margin-top: 20px; margin-left: -62px;opacity: 0.8; }
</style>
<div class="wap-tips" style="display: none"></div>    
   

{wc:templates "mobile/index","footer"}

  <script type="text/javascript">
        $(function () {
            var base_url = '{WEB_PATH}/mobile/home/userpassword';
            var ehtml = '';

            function checkPassword() {
                var value = $("#password").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请输入原密码~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
                } else if (value.length < 6) {
                    $(".wap-tips").html(ehtml + "密码至少6个字符~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }
			 function checkPassword1() {
                var value = $("#password1").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请输入新密码~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
                
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }
			function checkPassword2() {
                var value = $("#password2").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请重复输入新密码~").show();
                    return false;
                
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }

            function len(value) {
                var total = 0;
                for (i = 0; i < value.length; i++) {
                    var char = value.charCodeAt(i);
                    if ((char >= 0x0001 && char <= 0x007e) || (0xff60 <= char && char <= 0xff9f)) {
                        total++;
                    }
                    else {
                        total += 2;
                    }
                }
                return total;
            }


           $("#password").on('blur', function () {
				$(".wap-tips").hide();
                checkPassword();
            });
			$("#password1").on('blur', function () {
				$(".wap-tips").hide();
				 checkPassword1();
               			
            });
			$("#password2").on('blur', function () {
				$(".wap-tips").hide();
                checkPassword2();
            });

            $("#btn_login").click(function () {
                if (checkPassword() && checkPassword1() && checkPassword2() ) {
                    password = $("#password").val();
                    password1 = $("#password1").val();
					password2 = $("#password2").val();
                   
					$("#btn_login").addClass("letter-noSpac").html("正在修改...");
                    $.ajax({
                        url: base_url,
                        async : true,
		                addidvalue: true,
                        data: {action: 'password', password2: password2, password: password, password1: password1},
                        success: function (data) {
                            if (data != '1000') {
                                $('.wap-tips').html(ehtml + data).show();
								setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
								$("#btn_login").removeClass("letter-noSpac").html("确定修改");
                            } else {
                                 $('.wap-tips').html("修改成功").show();
                                setTimeout(function () {
									$("#btn_login").addClass("letter-noSpac").html("修改成功");
                                    location.href = "{WEB_PATH}/mobile/home/address/{wc:$uids}/";
                                }, 2000);
                            }
                        },
                        error: function () {
                            $('.wap-tips').html(ehtml + "数据提交失败,请重试!").show();
                        }
                    });
                }
            });
        });
    </script>

 
</div>
</body>
</html>
