
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, maximum-scale=1.0"/>
    <title>{wc:$title} - {wc:$webname}触屏版</title>
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link href="{G_TEMPLATES_CSS}/mobile/newComm.css" rel="stylesheet" type="text/css" />
    
	<link href="{G_TEMPLATES_CSS}/mobile/other.css" rel="stylesheet" type="text/css" />
        <!-- head js  库文件js-->
        
        <script type="text/javascript">
            var versionNumber="ts=3b5d42560ca10c23_1445665610";
        </script>
        <!-- H5 -->
	<script src="{G_TEMPLATES_JS}/mobile/jquery190.js" language="javascript" type="text/javascript"></script>
        <script>
            (function(c,b){var a={};(function(){var m=b.querySelector('meta[name="viewport"]'),j=b.querySelector('meta[name="hotcss"]'),l=c.devicePixelRatio,n=540,i=0;var e=c.navigator.appVersion.match(/iphone/gi);if(e){if(l>=3&&(!l||l>=3)){l=3}else{if(l>=2&&(!l||l>=2)){l=2}else{l=1}}}else{l=1}if(j){var g=j.getAttribute("content");if(g){var k=g.match(/initial-dpr=([d.]+)/);if(k){l=parseFloat(k[1])}var o=g.match(/max\-width=([\d\.]+)/);if(o){n=parseFloat(o[1])}var d=g.match(/design\-width=([\d\.]+)/);if(d){i=parseFloat(d[1])}}}b.documentElement.setAttribute("data-dpr",l);a.dpr=l;b.documentElement.setAttribute("max-width",n);a.maxWidth=n;if(i){b.documentElement.setAttribute("design-width",i);a.designWidth=i}var f=1/l;if(f==0.5&&e&&c.screen.width==375){f=0.48;}var h="initial-scale="+f+", minimum-scale="+f+", maximum-scale="+f+", user-scalable=no,width=device-width";if(m){m.setAttribute("content",h)}else{m=b.createElement("meta");m.setAttribute("name","viewport");m.setAttribute("content",h);b.head.appendChild(m)}})();a.px2rem=function(d,e){if(!e){e=parseInt(a.designWidth,10)}return parseInt(d,10)*320/e/20};a.rem2px=function(e,d){if(!d){d=parseInt(a.designWidth,10)}return e*20*d/320};a.remAddpx=function(h,d,g){var f=a.rem2px(h,g);var e=d*a.dpr/2;return f+e};a.mresize=function(){var d=b.documentElement.getBoundingClientRect().width||c.innerWidth;if(a.maxWidth&&(d/a.dpr>a.maxWidth)){d=a.maxWidth*a.dpr}if(!d){return false}b.documentElement.style.fontSize=(d*20/320)+"px";a.callback&&a.callback()};a.mresize();c.addEventListener("resize",function(){clearTimeout(a.tid);a.tid=setTimeout(a.mresize,33)},false);c.addEventListener("load",a.mresize,false);setTimeout(function(){a.mresize()},333);c.hotcss=a})(window,document);
        </script>
        <!-- head css -->
        


        <!-- H5 -->
    </head>
    <body>
        <!-- 主体 -->
        
	 <!-- 废弃了 -->
 <style>
 	#top_weixin{
 		width: 100%; z-index: 9999; position:fixed;top:0;display: none; background:#e4e4e4;
 	}
 	#open_d{
		height: 36px;  z-index: 99999; width: 100%; margin: 0 auto; position: relative; max-width: 476px; min-width: 320px; line-height: 36px; font-size: 14px; font-family: '微软雅黑';background: #e4e4e4;border: 1px solid rgba(255,56,56,1);margin: 1px auto;color:rgba(255,56,56,1);
 	}
 	#xq_a{
 		z-index: 99999;  margin: 0 auto; position: relative;max-width: 480px; min-width: 320px;display:none;
 	}
 </style>
<header class="g-header">
        <div class="head-l">
	        <a href="javascript:;" onclick="history.go(-1)" class="z-HReturn"><s></s><b>返回</b></a>
        </div>
        <h2>我的{wc:fun:_cfg('web_name_two')}</h2>
        <div class="head-r">
	        <a href="{WEB_PATH}/mobile/mobile/?yid={wc:$uids}/" class="z-Home"></a>
        </div>
    </header>
	<div class="main">
		<div class="app common">
			
			<form id="global-form" action="{WEB_PATH}/member/home/useraddress" method="post">
            <input type="hidden" name="type_address" value="mobile/home/address">
				<input type="hidden" name="id" value="" />
				<input type="hidden" name="from" value="">
				<input type="hidden" name="display_id" value="0">
				<input type="hidden" name="display_id_photo" value="1">
				<input type="hidden" name="cert_id" value="F75EwSSOfEw=">
				<input id="cdcode-input" type="hidden" name="cdcode" value="">
				<ul class="address-show">
					<li class="normal">
						<span class="fl">收货人：</span>
						<input type="text" autocomplete="off" placeholder="" x-webkit-speech="" id="username" name="username" class="normal-input fl" value="{wc:$dizhi['shouhuoren']}" maxlength="16" clearinput="on" required>
						
					</li>
					<li class="normal">
						<span class="fl">手机号：</span>
						<input type="text" autocomplete="off" placeholder="" x-webkit-speech="" id="mobile" name="mobile" class="normal-input fl" oldmobile="" value="{wc:$dizhi['mobile']}" maxlength="11" clearinput="on" required>

						
						
					</li>
					<li class="normal">
						
						<span class="fl">省份：</span>
						<span class="tbl-cell"><input type="hidden" name="province" id="province" value="{wc:$dizhi['sheng']}"/><label id="province_label">{wc:$dizhi['sheng']}</label><select class="new-select" id="province-select" data-province="{wc:$dizhi['sheng']}"></select></span>

						
					</li>
					<li class="normal">
						<span class="fl">城市：</span>
						<span class="tbl-cell"><input type="hidden" name="city" id="city" value="{wc:$dizhi['shi']}"/><label id="city_label" data-city="">{wc:$dizhi['shi']}</label><select class="new-select" id="city-select" data-city="{wc:$dizhi['shi']}"></select></span>

						
					</li>
					<li class="normal">
						<span class="fl">区县：</span>
						<span class="tbl-cell"><input type="hidden" name="town" id="town" value="{wc:$dizhi['xian']}"/><label id="town_label">{wc:$dizhi['xian']}</label><select id="town-select" class="new-select" data-town="{wc:$dizhi['xian']}"></select></span>
						
					</li>
					<li class="normal" style="overflow:hidden;">
						<span class="fl">详细地址：</span>
						<textarea rows="3" cols="20" class="normal-area" name="addr" id="addr" maxlength="40">{wc:$dizhi['jiedao']}</textarea>
						
					</li>
					
				</ul>
				<ul class="actionlist bgf7" style="overflow:hidden;">
											<li>
							<span class="state">设为默认收货地址</span>
							<div class="{wc:if $dizhi['default']=='Y'}{wc:else}no{wc:if:end} js-default-switch" data-id="">
								<span class='switch'></span>
								<input type="hidden" name="default" id="defaults" value="{wc:if $dizhi['default']=='Y'}1{wc:else}0{wc:if:end}" />
							</div>
						</li>
					
				</ul>
				 <a href="javascript:;" class="upAddress"  id="btn_login">保 存</a>
               
                <input type="button" class="goAddress" onclick="history.go(-1)" value="取消" id="btn_consignee_cancle" title="取 消">
			</form>
			<p class="bgf7" style="overflow:hidden;"><a id="delAddress" class="delAddress" href="javascript:;" style="display:none;" data-addr_id="">删除地址</a></p>
						


						<!-- 加入购物车快捷入口 -->
	        

{wc:templates "mobile/index","footer"}
        

	        <!--上传图片提示-->
	        <div class="uploadding" id="uploadimg_img" style="display: none;">
	            <div class="bg"></div>
	            <div class="box">图片上传中...</div>
	        </div>
		</div>
	</div>
	<div class="alert_fullbg" style="display: none; z-index: 201;"></div>
	<div class="normal-alert" style="display:none;" id="bind-other-alert">
		<div class="box">正在获取地址，请稍等...</div>
	</div>
<div class="wap-tips" style="display: none">
       
</div> 
<script type="text/javascript">
        $(function () {
             var base_url = '{WEB_PATH}/mobile/home/updateddress/{wc:$dizhi["id"]}';
            var ehtml = '';

            function checkshouhuoren() {
                var value = $("#username").val();
                var length = len(value);
				var regM = /^1\d{10}$/;
				var regE =  /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
				
                if (value == '' || value.length == 0) {
					
                    $(".wap-tips").html(ehtml + "请填写收货人~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
               
                } else {
					 return true;
                    
                }
               
				
            }
			
			function checkmobile() {
                var value = $("#mobile").val();
                var length = len(value);
				var regM = /^1[3,4,5,7,8,9]\d{9}$/;
				var regE =  /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
				
                if (value == '' || value.length == 0) {
					
                    $(".wap-tips").html(ehtml + "请填写手机号码~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
                }
                else if (regM.test(value)) {
                    $(".wap-tips").hide();
                } else {
					$(".wap-tips").html(ehtml + "请输入正确的手机号").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
                    
                }
                return true;
				
            }
            function checkprovince() {
                var value = $("#province").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请填写省份~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
              
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }
			function checkcity() {
                var value = $("#city").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请填写城市~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
              
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }
			function checktown() {
                var value = $("#town").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请填写区县~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
              
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }
			function checkaddr() {
                var value = $("#addr").val();
                if (value == '' || value.length == 0) {
                    $(".wap-tips").html(ehtml + "请填写详细地址~").show();
					setTimeout(function () {
									$(".wap-tips").hide();
                                }, 1000);
                    return false;
              
                } else {
                    $(".wap-tips").hide();
                }
                return true;
            }

            function len(value) {
                var total = 0;
                for (i = 0; i < value.length; i++) {
                    var char = value.charCodeAt(i);
                    if ((char >= 0x0001 && char <= 0x007e) || (0xff60 <= char && char <= 0xff9f)) {
                        total++;
                    }
                    else {
                        total += 2;
                    }
                }
                return total;
            }


            

            $("#btn_login").click(function () {
                if (checkshouhuoren() && checkmobile() && checkprovince() && checkcity() && checktown() && checkaddr()) {
                    shouhuoren = $("#username").val();
                    mobile = $("#mobile").val();
					province = $("#province").val();
                    city = $("#city").val();
					town = $("#town").val();
                    addr = $("#addr").val();
					defaults = $("#defaults").val();
					$("#btn_login").addClass("letter-noSpac").html("正在保存...");
					
                    $.ajax({
                        url: base_url,
                        async : true,
		                addidvalue: true,
                        data: {action: 'eidt', shouhuoren: shouhuoren, mobile: mobile, sheng: province, shi: city, xian: town, jiedao: addr, defaults: defaults},
                        success: function (data) {
                            if (data != '1000') {
                                $('.wap-tips').html(ehtml + data).show();
								$("#btn_login").removeClass("letter-noSpac").html("保 存");
                            } else {
                                 $('.wap-tips').html("保存成功").show();
                               $("#btn_login").addClass("letter-noSpac").html("保存成功");
                                    location.href = "{wc:$reurl}";
                            }
                        },
                        error: function () {
                            $('.wap-tips').html(ehtml + "数据提交失败,请重试!").show();
                        }
                    });
                }
            });
        });
    </script>
        <!-- head js  库文件js 160918优化移动到此处-->
        <script type="text/javascript" src="{G_TEMPLATES_JS}/mobile/address/images.js?ts=c22b32d0affbd30d_1476700220"></script>
        
        <script type="text/javascript">
            var versionNumber="ts=c22b32d0affbd30d_1476700220";
            var utm_hashfollow = [106788,106787,106786,106785,106784,106783,106782,106781,106780,106779,106665,106789,106895,106894,106893,106892,106891,106890,106889,106888,106887,106886,106885,106884,106883,106882,106881];
        </script>
        <!-- 业务js -->
        
	<script src="{G_TEMPLATES_JS}/mobile/address/sea.js"></script>
	 <script src="{G_TEMPLATES_JS}/mobile/address/sea-config.js"></script>
	
	<script type="text/javascript">
		use('editAddress');
	</script>
	

        <!-- 微信分享配置 -->
        
        <!-- 统计js -->
        
	
    </body>
</html>